<!DOCTYPE html>

<html lang="en">
    <head>

        <meta content="4851b15326f6b290-09e175a0bcd24dcd-gab2f4fb87b61a9c2-c" name="google-translate-customization"/>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
        
            
        
            
        
            
        
            
        

        <!-- asciidoctor -a coderay-css=class,linkcss,source-highlighter=coderay -b html5 -D . /dev/null -->
        <style>
            /* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }

        </style>
        <style>
            /* Foundation stylesheet for CodeRay (to match GitHub theme) | MIT License | http://foundation.zurb.com */
table.CodeRay { border-collapse: collapse; padding: 2px; margin-bottom: 0; border: 0; background: transparent; }
table.CodeRay td { padding: 0 .5em; vertical-align: top; }
table.CodeRay td.line-numbers { text-align: right; color: #999; border-right: 1px solid #e5e5e5; padding-left: 0; }
span.line-numbers { border-right: 1px solid #E5E5E5; color: #999; display: inline-block; margin-right: 0.5em; padding-right: 0.5em; }
.CodeRay td.line-numbers strong, .CodeRay span.line-numbers strong { font-weight: normal; }
.CodeRay .debug { color: white !important; background: blue !important; }
.CodeRay .annotation { color: #007; }
.CodeRay .attribute-name { color: #f08; }
.CodeRay .attribute-value { color: #700; }
.CodeRay .binary { color: #509; }
.CodeRay .comment  { color: #999; font-style: italic; }
.CodeRay .char { color: #04D; }
.CodeRay .char .content { color: #04D; }
.CodeRay .char .delimiter { color: #039; }
.CodeRay .class { color: #458; }
.CodeRay .complex { color: #A08; }
.CodeRay .constant { color: teal; }
.CodeRay .color { color: #0A0; }
.CodeRay .class-variable { color: #369; }
.CodeRay .decorator { color: #B0B; }
.CodeRay .definition { color: #099; }
.CodeRay .directive { color: #088; }
.CodeRay .delimiter { color: black; }
.CodeRay .doc { color: #970; }
.CodeRay .doctype { color: #34b; }
.CodeRay .doc-string { color: #D42; }
.CodeRay .escape  { color: #666; }
.CodeRay .entity { color: #800; }
.CodeRay .error { color: #808; }
.CodeRay .exception { color: #C00; }
.CodeRay .filename { color: #099; }
.CodeRay .function { color: #900; }
.CodeRay .global-variable { color: teal; }
.CodeRay .hex { color: #058; }
.CodeRay .integer  { color: #099; }
.CodeRay .include { color: #B44; }
.CodeRay .inline { color: black; }
.CodeRay .inline .inline { background: #ccc; }
.CodeRay .inline .inline .inline { background: #bbb; }
.CodeRay .inline .inline-delimiter { color: #D14; }
.CodeRay .inline-delimiter { color: #D14; }
.CodeRay .important { color: #f00; }
.CodeRay .interpreted { color: #B2B; }
.CodeRay .instance-variable { color: teal; }
.CodeRay .label { color: #970; }
.CodeRay .local-variable { color: #963; }
.CodeRay .octal { color: #40E; }
.CodeRay .predefined { color: #369; }
.CodeRay .preprocessor { color: #579; }
.CodeRay .pseudo-class { color: #00C; }
.CodeRay .predefined-type { color: #074; }
.CodeRay .reserved, .keyword  { color: #000; }
.CodeRay .key { color: #808; }
.CodeRay .key .delimiter { color: #606; }
.CodeRay .key .char { color: #80f; }
.CodeRay .value { color: #088; }
.CodeRay .regexp { background-color: #fff0ff; }
.CodeRay .regexp .content { color: #808; }
.CodeRay .regexp .delimiter { color: #404; }
.CodeRay .regexp .modifier { color: #C2C; }
.CodeRay .regexp .function  { color: #404; font-weight: bold; }
.CodeRay .string { color: #D20; }
.CodeRay .string .string { }
.CodeRay .string .string .string { background-color: #ffd0d0; }
.CodeRay .string .content { color: #D14; }
.CodeRay .string .char { color: #D14; }
.CodeRay .string .delimiter { color: #D14; }
.CodeRay .shell { color: #D14; }
.CodeRay .shell .content { }
.CodeRay .shell .delimiter { color: #D14; }
.CodeRay .symbol { color: #990073; }
.CodeRay .symbol .content { color: #A60; }
.CodeRay .symbol .delimiter { color: #630; }
.CodeRay .tag, .CodeRay .attribute-name { color: #070; }
.CodeRay .tag-special { color: #D70; }
.CodeRay .type { color: #339; }
.CodeRay .variable  { color: #036; }
.CodeRay .insert { background: #afa; }
.CodeRay .delete { background: #faa; }
.CodeRay .change { color: #aaf; background: #007; }
.CodeRay .head { color: #f8f; background: #505; }
.CodeRay .insert .insert { color: #080; }
.CodeRay .delete .delete { color: #800; }
.CodeRay .change .change { color: #66f; }
.CodeRay .head .head { color: #f4f; }

        </style>
        <style>

            
            

            #footer {
                background-color: inherit;
                text-align: right;
            }

            #google_translate_element {
                padding-top: 32px;
            }

            
            .green {
                color: #006400;
            }

            
            .listingblock > .content pre {
                overflow: auto;
                white-space: pre;
                word-wrap: inherit;
            }

            pre {
                margin-bottom: 0.625em;
            }

            .red {
                color: #ff0000;
            }

            select {
                width: inherit;
            }

            
            .yellow {
                color: #cc0;
            }

        </style>

        <title>Problem Set 6: Web Server</title>

    </head>

    <body class="article toc2 toc-left">

        

            <div id="header">

                
                    
                        <h1>Problem Set 6: Web Server</h1>
                    
                    <span id="author" class="author">
                        This is CS50. Harvard University.
                    </span>
                

                <div id="google_translate_element"></div>
                <script>
                    function googleTranslateElementInit() {
                        new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL}, 'google_translate_element');
                    }
                </script>
                <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

                
                    <div id="toc" class="toc2">
                        <div id="toctitle">Table of Contents</div>
                        <ul class="sectlevel1">
<li><a href="#objectives">Objectives</a></li>
<li><a href="#academic_honesty">Academic Honesty</a>
<ul class="sectlevel2">
<li><a href="#reasonable">Reasonable</a></li>
<li><a href="#not_reasonable">Not Reasonable</a></li>
</ul>
</li>
<li><a href="#getting_ready">Getting Ready</a></li>
<li><a href="#getting_started">Getting Started</a>
<ul class="sectlevel2">
<li><a href="#server_c">server.c</a>
<ul class="sectlevel3">
<li><a href="#main">main</a></li>
<li><a href="#connected">connected</a></li>
<li><a href="#error">error</a></li>
<li><a href="#load">load</a></li>
<li><a href="#handler">handler</a></li>
<li><a href="#lookup">lookup</a></li>
<li><a href="#parse">parse</a></li>
<li><a href="#reset">reset</a></li>
<li><a href="#start">start</a></li>
<li><a href="#stop">stop</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#what_to_do">What To Do</a>
<ul class="sectlevel2">
<li><a href="#lookup_2">lookup</a></li>
<li><a href="#main_2">main</a>
<ul class="sectlevel3">
<li><a href="#validate_request_line">validate request-line</a></li>
<li><a href="#extract_query_from_request_target">extract query from request-target</a></li>
<li><a href="#concatenate_root_and_absolute_path">concatenate root and absolute-path</a></li>
<li><a href="#ensure_path_exists">ensure path exists</a></li>
<li><a href="#ensure_path_is_readable">ensure path is readable</a></li>
<li><a href="#extract_path_s_extension">extract path&#8217;s extension</a></li>
<li><a href="#respond_to_client">respond to client</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#how_to_submit">How to Submit</a>
<ul class="sectlevel2">
<li><a href="#step_1_of_2">Step 1 of 2</a></li>
<li><a href="#step_2_of_2">Step 2 of 2</a></li>
</ul>
</li>
</ul>
                    </div>
                

            </div>

        

        <div id="content">
            <div class="sect1">
<h2 id="objectives"><a class="link" href="#objectives">Objectives</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Become familiar with HTTP.</p>
</li>
<li>
<p>Apply familiar techniques in unfamiliar contexts.</p>
</li>
<li>
<p>Transition from C to web programming.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="academic_honesty"><a class="link" href="#academic_honesty">Academic Honesty</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This course&#8217;s philosophy on academic honesty is best stated as "be reasonable." The course recognizes that interactions with classmates and others can facilitate mastery of the course&#8217;s material. However, there remains a line between enlisting the help of another and submitting the work of another. This policy characterizes both sides of that line.</p>
</div>
<div class="paragraph">
<p>The essence of all work that you submit to this course must be your own. Collaboration on problem sets is not permitted except to the extent that you may ask classmates and others for help so long as that help does not reduce to another doing your work for you. Generally speaking, when asking for help, you may show your code to others, but you may not view theirs, so long as you and they respect this policy&#8217;s other constraints. Collaboration on the course&#8217;s final project is permitted to the extent prescribed by its specification.</p>
</div>
<div class="paragraph">
<p>Below are rules of thumb that (inexhaustively) characterize acts that the course considers reasonable and not reasonable. If in doubt as to whether some act is reasonable, do not commit it until you solicit and receive approval in writing from the course&#8217;s heads. Acts considered not reasonable by the course are handled harshly.</p>
</div>
<div class="sect2">
<h3 id="reasonable"><a class="link" href="#reasonable">Reasonable</a></h3>
<div class="ulist">
<ul>
<li>
<p>Communicating with classmates about problem sets' problems in English (or some other spoken language).</p>
</li>
<li>
<p>Discussing the course&#8217;s material with others in order to understand it better.</p>
</li>
<li>
<p>Helping a classmate identify a bug in his or her code at Office Hours, elsewhere, or even online, as by viewing, compiling, or running his or her code, even on your own computer.</p>
</li>
<li>
<p>Incorporating snippets of code that you find online or elsewhere into your own code, provided that those snippets are not themselves solutions to assigned problems and that you cite the snippets' origins.</p>
</li>
<li>
<p>Reviewing past semesters' quizzes and solutions thereto.</p>
</li>
<li>
<p>Sending or showing code that you&#8217;ve written to someone, possibly a classmate, so that he or she might help you identify and fix a bug.</p>
</li>
<li>
<p>Sharing snippets of your own code online so that others might help you identify and fix a bug.</p>
</li>
<li>
<p>Turning to the web or elsewhere for instruction beyond the course&#8217;s own, for references, and for solutions to technical difficulties, but not for outright solutions to problem set&#8217;s problems or your own final project.</p>
</li>
<li>
<p>Whiteboarding solutions to problem sets with others using diagrams or pseudocode but not actual code.</p>
</li>
<li>
<p>Working with (and even paying) a tutor to help you with the course, provided the tutor does not do your work for you.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="not_reasonable"><a class="link" href="#not_reasonable">Not Reasonable</a></h3>
<div class="ulist">
<ul>
<li>
<p>Accessing a solution in CS50 Vault to some problem prior to (re-)submitting your own.</p>
</li>
<li>
<p>Asking a classmate to see his or her solution to a problem set&#8217;s problem before (re-)submitting your own.</p>
</li>
<li>
<p>Decompiling, deobfuscating, or disassembling the staff&#8217;s solutions to problem sets.</p>
</li>
<li>
<p>Failing to cite (as with comments) the origins of code or techniques that you discover outside of the course&#8217;s own lessons and integrate into your own work, even while respecting this policy&#8217;s other constraints.</p>
</li>
<li>
<p>Giving or showing to a classmate a solution to a problem set&#8217;s problem when it is he or she, and not you, who is struggling to solve it.</p>
</li>
<li>
<p>Looking at another individual&#8217;s work during a quiz.</p>
</li>
<li>
<p>Paying or offering to pay an individual for work that you may submit as (part of) your own.</p>
</li>
<li>
<p>Providing or making available solutions to problem sets to individuals who might take this course in the future.</p>
</li>
<li>
<p>Searching for, soliciting, or viewing a quiz&#8217;s questions or answers prior to taking the quiz.</p>
</li>
<li>
<p>Searching for or soliciting outright solutions to problem sets online or elsewhere.</p>
</li>
<li>
<p>Splitting a problem set&#8217;s workload with another individual and combining your work.</p>
</li>
<li>
<p>Submitting (after possibly modifying) the work of another individual beyond allowed snippets.</p>
</li>
<li>
<p>Submitting the same or similar work to this course that you have submitted or will submit to another.</p>
</li>
<li>
<p>Submitting work to this course that you intend to use outside of the course (e.g., for a job) without prior approval from the course&#8217;s heads.</p>
</li>
<li>
<p>Using resources during a quiz beyond those explicitly allowed in the quiz&#8217;s instructions.</p>
</li>
<li>
<p>Viewing another&#8217;s solution to a problem set&#8217;s problem and basing your own solution on it.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting_ready"><a class="link" href="#getting_ready">Getting Ready</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, join David (hey, that&#8217;s me) for a tour of HTTP, the "protocol" via which web browsers and web servers communicate.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="//www.youtube.com/embed/hU4XuBe50K4?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>Next, consider reviewing some of these examples, via which we introduced HTML forms, which we used to submit GET queries to Google.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="//www.youtube.com/embed/RQ2_TIXBo00?rel=0&amp;playlist=14jiSM4CMtY,uqsKEAAvpTA,P7oACLRGnEg,AI2nKW7_pck" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting_started"><a class="link" href="#getting_started">Getting Started</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start up your appliance and, upon reaching John Harvard&#8217;s desktop, open a terminal window (remember how?) and execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">update50</code></pre>
</div>
</div>
<div class="paragraph">
<p>to ensure that your appliance is up-to-date!</p>
</div>
<div class="paragraph">
<p>Like Problem Set 5, this problem set comes with some distribution code that you&#8217;ll need to download before getting started.  Go ahead and execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">cd ~/Dropbox</code></pre>
</div>
</div>
<div class="paragraph">
<p>in order to navigate to your <code>~/Dropbox</code> directory.  Then execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">wget http://cdn.cs50.net/2014/fall/psets/6/pset6/pset6.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>in order to download a ZIP (i.e., compressed version) of this problem set&#8217;s distro.  If you then execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">ls</code></pre>
</div>
</div>
<div class="paragraph">
<p>you should see that you now have a file called <code>pset6.zip</code> in your <code>~/Dropbox</code> directory.  Unzip it by executing the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">unzip pset6.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you again execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">ls</code></pre>
</div>
</div>
<div class="paragraph">
<p>you should see that you now also have a <code>pset6</code> directory.  You&#8217;re now welcome to delete the ZIP file with the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">rm -f pset6.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now dive into that <code>pset6</code> directory by executing the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">cd pset6</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">tree</code></pre>
</div>
</div>
<div class="paragraph">
<p>(which is a hierarchical, recursive variant of <code>ls</code>), and you should see that the directory contains the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">.
|-- public
|   |-- cat.html
|   |-- cat.jpg
|   |-- hello.html
|   `-- hello.php
`-- server.c</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dang it, still C. But some other stuff too!</p>
</div>
<div class="paragraph">
<p>Go ahead and take a look at <code>cat.html</code> with <code>gedit</code>. Pretty simple, right? Looks like it has an <code>img</code> tag, the value of whose <code>src</code> attribute is <code>cat.jpg</code>.</p>
</div>
<div class="paragraph">
<p>Next, take a look at <code>hello.html</code> with <code>gedit</code>. Notice how it has a <code>form</code> that&#8217;s configured to submit via GET a <code>text</code> field called <code>name</code> to <code>hello.php</code>. (Make sense? If not, try taking another look at the walkthrough for <code>search-0.html</code> from Week 7!)</p>
</div>
<div class="paragraph">
<p>Now take a look at <code>hello.php</code>. Notice how it&#8217;s mostly HTML but inside its <code>body</code> is a bit of PHP code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="php language-php"><span class="inline-delimiter">&lt;?</span>= <span class="predefined">htmlspecialchars</span>(<span class="predefined">$_GET</span>[<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>]) <span class="inline-delimiter">?&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;?=</code> notation just means "echo the following value here". <code>htmlspecialchars</code>, meanwhile, is just an attrociously named function whose purpose in life is to ensure that special (even dangerous!) characters like <code>&lt;</code> are properly "escaped" as HTML "entities." See <a href="http://php.net/manual/en/function.htmlspecialchars.php">http://php.net/manual/en/function.htmlspecialchars.php</a> for more details if curious. Anyhow, <code>$_GET</code> is a "superglobal" variable inside of which are any HTTP parameters that were passed via GET to <code>hello.php</code>. More specifically, it&#8217;s an "associative array" (i.e., hash table) with keys and values. Per that HTML form in <code>hello.html</code>, one such key should be <code>name</code>! But more on all that in a bit.</p>
</div>
<div class="paragraph">
<p>Now the fun part. Open up <code>server.c</code> with <code>gedit</code>.</p>
</div>
<div class="paragraph">
<p>Yup. You guessed it. The challenge ahead is to implement your own web server that knows how to serve static content (i.e., files ending in <code>.html</code>, <code>.jpg</code>, et al.) and dynamic content (i.e., files ending in <code>.php</code>).</p>
</div>
<div class="paragraph">
<p>But let&#8217;s try out the staff&#8217;s solution before we dive into the distribution code.</p>
</div>
<div class="paragraph">
<p>Open up a big terminal window (outside of <code>gedit</code>), as via <strong>Menu &gt; Accessories &gt; Terminal Emulator</strong>. Then execute the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">~cs50/pset6/server</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see these instructions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">Usage: server [-p port] /path/to/root</code></pre>
</div>
</div>
<div class="paragraph">
<p>Looks a bit complex, but that&#8217;s just a conventional way of saying:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>This program&#8217;s name is <code>server</code>.</p>
</li>
<li>
<p>To specify a (TCP) port number on which <code>server</code> should listen for HTTP requests, include <code>-p</code> as a command-line argument, followed by (presumably) a number. The brackets imply that specifying a port is optional. (If you don&#8217;t specify, a random port will be chosen for you.) As an aside, most any number between 1024 (or, even more properly, 49152) and 65536 should be fine.</p>
</li>
<li>
<p>The last command-line argument to <code>server</code> should be the path to your server&#8217;s "root" (the directory from which files will be served).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s try it out. Execute the below from within your own <code>~/Dropbox/pset6</code> directory so that the staff&#8217;s solution uses your own copy of <code>public</code> as its root.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">~cs50/pset6/server public</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see output like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash"><span class="yellow">Using /home/jharvard/solutions/2014/fall/psets/6/public for server's root</span>
<span class="yellow">Listening on port #####</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>#####</code> is a random port number. Take note of your appliance&#8217;s IP address, which should be a number of the form <code>#.#.#.#</code> in the appliance&#8217;s bottom-right corner. Then, open up Chrome (inside of the appliance or on your own computer) and visit <code>http://#.#.#.#:#####/cat.jpg</code>, where, again, <code>#.#.#.#</code> is your appliance&#8217;s IP address (not <code>#.#.#.#</code> literally) and <code>#####</code> is the random port number. For instance, if your appliance&#8217;s IP address is <code>1.2.3.4</code> and the random port number is 1337, you should visit <code>http://1.2.3.4:1337/cat.jpg</code>.</p>
</div>
<div class="paragraph">
<p>Anyhow, you should see a happy cat?? In your terminal window, meanwhile, you should see</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">GET /cat.jpg HTTP/1.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>which is the "request line" that your browser sent to the server (which is being outputted by <code>server</code> via <code>printf</code> for diagnostics' sake). Below that you should see</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash"><span class="green">HTTP/1.1 200 OK</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>which is the server&#8217;s response to the browser (which is also being outputted by <code>server</code> via <code>printf</code> for diagnostics' sake).</p>
</div>
<div class="paragraph">
<p>Go ahead and stop the server by hitting control-c. Then, re-run it on, say, port <code>8080</code> which is a popular choice when running a webserver without "superuser" privileges. Remember how? Like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">~cs50/pset6/server -p 8080 public</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, just like I did in that short on HTTP, open up Chrome&#8217;s developer tools, per the instructions at <a href="https://developer.chrome.com/devtools">https://developer.chrome.com/devtools</a>. Then, once open, click the tools' <strong>Network</strong> tab, and then, while holding down Shift, reload the page.</p>
</div>
<div class="paragraph">
<p>Not only should you see Happy Cat again. You should also see the below in your terminal window.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">GET /cat.jpg HTTP/1.1
<span class="green">HTTP/1.1 200 OK</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You might also see the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">GET /favicon.ico HTTP/1.1
<span class="red">404 Not Found</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>What&#8217;s going on if so? Well, by convention, a lot of websites have in their root directory a <code>favicon.ico</code> file, which is a tiny icon that&#8217;s meant to be displayed a browser&#8217;s address bar or tab. If you do see those lines in your terminal window, that just means Chrome is guessing that your server, too, might have <code>favicon.ico</code> file. It doesn&#8217;t (unless you put one to <code>public</code>), so not to worry.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a quick walkthrough if a demo might help.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="//www.youtube.com/embed/mRSxes0gwfw?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>Now try visiting <code>http://#.#.#.#:8080/cat.html</code>. You should see Happy Cat again, possibly with a bit of a margin around him (simply because of Chrome&#8217;s default CSS properties). If you look at the developer tools' <strong>Network</strong> tab (possibly after reloading, if they weren&#8217;t still open), you should see that Chrome first requested <code>cat.html</code> followed by <code>cat.jpg</code>, since the latter, recall, was specified as the value of that <code>img</code> element&#8217;s <code>src</code> attribute that we saw earlier in <code>cat.html</code>. To confirm as much, take a look at the developer tools' <strong>Elements</strong> tab, wherein you&#8217;ll see a pretty-printed version of the HTML in <code>cat.html</code>. You can even change it but only Chrome&#8217;s in-memory copy thereof. To change the actual file, you&#8217;d need to do so with, say, <code>gedit</code> in the usual way. Incidentally, you might find it interesting to tinker with the developer tools' <strong>Styles</strong> tab at right, too. Even though this page doesn&#8217;t have any CSS of its own, you can see and change (temporarily) Chrome&#8217;s default CSS properties via that tab.</p>
</div>
<div class="paragraph">
<p>Okay, one last test. Try visiting <code>http://#.#.#.#:8080/hello.html</code>. Go ahead and input your name into the form and then submit it, as by clicking the button or hitting Enter. You should find yourself at a URL like <code>http://#.#.#.#:8080/hello.php?name=Alice</code> (albeit with your name, not Alice&#8217;s), where a personalized hello awaits! That&#8217;s what we mean by "dynamic" content. By submitting that form, you provided input (i.e., your name) to the server, which then generated output just for you. (That input was in the form of an "HTTP parameter" called <code>name</code>, the value of which was your name.) Indeed, if you look at the page&#8217;s source code (as via the developer tools' <strong>Elements</strong> tab), you&#8217;ll see your name embedded within the HTML! By contrast, files like <code>cat.jpg</code> and <code>cat.html</code> (and even <code>hello.html</code>) are "static" content, since they&#8217;re not dynamically generated.</p>
</div>
<div class="paragraph">
<p><strong>Take care not to omit the port number from your URLs.</strong> Else your browser will end up talking to the appliance&#8217;s own web server (Apache), and you&#8217;ll see 403s and 404s that you&#8217;re probably not expecting!</p>
</div>
<div class="paragraph">
<p>Neat, eh?? Though odds are you&#8217;ll find it easier to test your own code via a command line than with a browser. So let&#8217;s show you one other technique.</p>
</div>
<div class="paragraph">
<p>Open up a second terminal window and position it alongside your first. In the first terminal window, execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">~cs50/pset6/server -p 8080 public</code></pre>
</div>
</div>
<div class="paragraph">
<p>from within your own <code>~/Dropbox/pset6</code> directory, if the server isn&#8217;t already running on that port. Then, in the second terminal window, execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">telnet #.#.#.# 8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>#.#.#.#</code> is, as before, your appliance&#8217;s IP address. <code>telnet</code> is a program via which you can "communicate with another host" via textual commands. (Back in my day, too, it was how we checked email!) Anyhow, note that <code>telnet</code> expects a space (not a colon) between an address and the port.</p>
</div>
<div class="paragraph">
<p>You should find that <code>telnet</code> is now waiting for input. Go ahead and type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">GET /cat.html HTTP/1.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>followed by Enter twice, which <code>telnet</code> will interpret as CRLF CRLF (i.e., <code>\r\n\r\n</code>).</p>
</div>
<div class="paragraph">
<p>You should see that the server&#8217;s responded with a request line, some headers, a blank line, and some HTML?? Nice! Odds are, whilst debugging your server, you&#8217;ll find it more convenient (and revealing!) to see all of that via <code>telnet</code> than by poking around Chrome&#8217;s developer tools.</p>
</div>
<div class="paragraph">
<p>Incidentally, take care not to request <code>cat.jpg</code> (or any binary file) via <code>telnet</code>, else you&#8217;ll see quite a mess! (You&#8217;re about to try, aren&#8217;t you.)</p>
</div>
<div class="paragraph">
<p>Unfortunately, your own copy of <code>server.c</code> isn&#8217;t quite so featureful as the staff&#8217;s solution&#8230; yet! Let&#8217;s dive into that distribution code. Let&#8217;s start with a high-level overview.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="//www.youtube.com/embed/L7Xr5b1WwCY?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>And now a lower-level tour through the code.</p>
</div>
<div class="sect2">
<h3 id="server_c"><a class="link" href="#server_c">server.c</a></h3>
<div class="paragraph">
<p>Open up <code>server.c</code> with <code>gedit</code>, if not open already. Let&#8217;s take a tour.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Atop the file are a bunch of "feature test macro requirements" that allow us to use certain functions that are declared (conditionally) in the header files further below.</p>
</li>
<li>
<p>Defined next are a few constants that specify limits on HTTP requests sizes. We&#8217;ve (arbitrarily) based their values on defaults used by Apache, a popular web server. See <a href="http://httpd.apache.org/docs/2.2/mod/core.html">http://httpd.apache.org/docs/2.2/mod/core.html</a> if curious.</p>
</li>
<li>
<p>Defined next is <code>OCTETS</code>, a constant the specifies how many "octets" we&#8217;ll eventually be reading into buffers at a time. An "octet" is just another word for what we know as a "byte" (i.e., 8 bits); it&#8217;s common nomenclature in the world of networking.</p>
</li>
<li>
<p>Next are a bunch of header files, followed by a definition of <code>octet</code>, which we&#8217;ve indeed defined as 8 bits (i.e., a <code>char</code>), followed by some prototypes.</p>
</li>
<li>
<p>Finally, just above <code>main</code> are a bunch of global variables. In general, it&#8217;s wise to avoid global variables, but sometimes you can&#8217;t. Indeed, as you&#8217;ll soon see, this web server has a "signal handler" that requires that some of the server&#8217;s state be global so that it can thoroughly free memory when a user stops the server by hitting control-c.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="main"><a class="link" href="#main">main</a></h4>
<div class="paragraph">
<p>Let&#8217;s now walk through <code>main</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Atop <code>main</code> is an initialization of what appears to be a global variable called <code>errno</code>. In fact, <code>errno</code> is defined in <code>errno.h</code> and is used by quite a few functions to indicate (via an <code>int</code>), in cases of error, precisely which error has occurred. See <code>man errno</code> for more details.</p>
</li>
<li>
<p>Shortly thereafter is a call to <code>getopt</code>, which is a function declared in <code>unistd.h</code> that makes it easier to parse command-line arguments. See <code>man 3 getopt</code> if curious. Notice how we use <code>getopt</code> (and some Boolean expressions) to ensure that <code>server</code> is used properly.</p>
</li>
<li>
<p>Next notice the call to <code>start</code> (for which you may have noticed a prototype earlier). More on that later.</p>
</li>
<li>
<p>Below that is</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="c language-c">signal(SIGINT, handler);</code></pre>
</div>
</div>
<div class="paragraph">
<p>which tells the program to listen for <code>SIGINT</code> (i.e., control-c) and call <code>handler</code> (a function defined by us elsewhere in <code>server.c</code>) if heard.</p>
</div>
</li>
<li>
<p>And then <code>main</code> enters an infinite <code>while</code> loop.</p>
<div class="ulist">
<ul>
<li>
<p>Inside of that loop is a call to <code>reset</code> (another function defined by us) that takes care of freeing some memory and resetting some state in between HTTP requests.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Thereafter is a call to <code>connected</code> within an <code>if</code> statement. Even though <code>connected</code> does return <code>true</code> or <code>false</code>, it does so by "blocking," waiting until a browser actually connects to the server before returning a value.</p>
</li>
<li>
<p>After that is a call to <code>parse</code>, which parses a browser&#8217;s HTTP request and returns, as one big string (i.e., <code>char*</code>), its request line and any headers, with each line terminated by CRLF (i.e., <code>\r\n</code>) instead of just LF (i.e., <code>\n</code>). Per the spec, aka "request for comments" (RFC), for HTTP, lines in HTTP messages should indeed be terminated by CRLF (just like text files in Windows). See <a href="https://tools.ietf.org/html/rfc7230">https://tools.ietf.org/html/rfc7230</a> if curious. Note that <code>parse</code> ultimately stores the address of the parsed request in <code>request</code>, one of the global variables declared above <code>main</code>.</p>
</li>
<li>
<p>Next is a bunch of code that parses that request, extracting only its request line.</p>
</li>
<li>
<p>And then there&#8217;s a <code>TODO</code> for you! But more on that in a bit.</p>
</li>
<li>
<p>Below the <code>TODO</code> is a bunch of code we wrote that adds support for <code>.php</code> files. It&#8217;s a bit cryptic at first glance, but in a nutshell, all we&#8217;re doing, upon receiving a request for, say, <code>hello.php</code>, is executing a line like</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="php language-php"><span class="constant">QUERY_STRING</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name=Alice</span><span class="delimiter">&quot;</span></span> <span class="constant">REDIRECT_STATUS</span>=<span class="integer">200</span> <span class="constant">SCRIPT_FILENAME</span>=/home/jharvard/<span class="constant">Dropbox</span>/pset6/<span class="keyword">public</span>/hello.php php-cgi</code></pre>
</div>
</div>
<div class="paragraph">
<p>the effect of which is to pass the contents of <code>hello.php</code> to PHP&#8217;s interpreter (i.e., <code>php-cgi</code>), with any HTTP parameters supplied via an "environment variable" called <code>QUERY_STRING</code>. Via <code>load</code> (a function we wrote), we then read the interpreter&#8217;s output into memory (storing the address thereof in a global variable called <code>body</code>, which was also declared above <code>main</code>). And then we respond to the browser with (dynamically generated) output like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="html language-html">HTTP/1.1 200 OK
Connection: close
Content-Length: 127
X-Powered-By: PHP/5.5.9-1ubuntu4.4
Content-type: text/html

<span class="doctype">&lt;!DOCTYPE html&gt;</span>

<span class="tag">&lt;html&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;title&gt;</span>hello<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        hello, Alice    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Perhaps new is our use of <code>popen</code>, <code>memmem</code>, <code>dprintf</code>, and <code>write</code>, but see each&#8217;s <code>man</code> page for details! And know that <code>popen</code> opens a "pipe" to a process (<code>php-cgi</code> in our case), which provides us with a <code>FILE</code> pointer via which we can read that process&#8217;s standard output (as though it were an actual file). Note, too, that functions like <code>dprintf</code> and <code>write</code> (and <code>open</code> and <code>read</code> and others) use a "file descriptor" (i.e., an <code>int</code>) instead of a <code>FILE</code> pointer (i.e., <code>FILE*</code>) to refer to files. That aside, though, they&#8217;re not all that different from <code>fprintf</code> and <code>fwrite</code> (and <code>fopen</code> and <code>fread</code> and others). Do just consult <code>man</code> pages for which functions use which.</p>
</div>
</li>
<li>
<p>Below that code for handling <code>.php</code> files is another <code>TODO</code> for you! But more on that in a bit too.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And that&#8217;s it for <code>main</code>! Notice, though, that throughout <code>main</code> are a few uses of <code>continue</code>, the effect of which is to jump back to the start of that infinite loop, where <code>reset</code> is called. Just before <code>continue</code> in some cases, too, is a call to <code>error</code> (another function we wrote) with an HTTP status code. Together, those lines (along with others you&#8217;ll write!) allow the server to handle and respond to errors just before returning its attention to (i.e., blocking for) new requests.</p>
</div>
</div>
<div class="sect3">
<h4 id="connected"><a class="link" href="#connected">connected</a></h4>
<div class="paragraph">
<p>Take a quick peek at <code>connected</code> below <code>main</code>. Don&#8217;t fret if unsure how this function works, but do try to infer from the <code>man</code> pages for <code>memset</code> and <code>accept</code>!</p>
</div>
</div>
<div class="sect3">
<h4 id="error"><a class="link" href="#error">error</a></h4>
<div class="paragraph">
<p>Spend a bit more time looking through <code>error</code>, which is that function via which we respond to browsers with errors (e.g., 404). This function&#8217;s a bit longer but perhaps has some more familiar constructs. Before forging ahead, be sure you&#8217;re reasonably comfortable with how this function works.</p>
</div>
</div>
<div class="sect3">
<h4 id="load"><a class="link" href="#load">load</a></h4>
<div class="paragraph">
<p>Recall that <code>load</code> is the function that reads a file into memory (using a global variable called <code>file</code> that&#8217;s declared above <code>main</code>). Read through this one slowly, taking note how it uses one buffer (<code>buffer</code>) to read a fixed number of octets at a time that it then copies into a second buffer (the address of which is stored in <code>body</code>, another global variable that&#8217;s declared above <code>main</code>), which it re-sizes as needed via <code>realloc</code>. Long story (nay, long function!) short, this function reads the entirety of a file (or a pipe) into memory.</p>
</div>
</div>
<div class="sect3">
<h4 id="handler"><a class="link" href="#handler">handler</a></h4>
<div class="paragraph">
<p>Thankfully, a short one! Essentially, this function (called whenever a user hits control-c) simply calls <code>stop</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="lookup"><a class="link" href="#lookup">lookup</a></h4>
<div class="paragraph">
<p>Awww, just a <code>TODO</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="parse"><a class="link" href="#parse">parse</a></h4>
<div class="paragraph">
<p>Another biggee, albeit pretty similar to <code>load</code>! This one, though, reads an HTTP request from a network connection, ultimately throwing away one CRLF and the request&#8217;s "body", if any, preserving only its request line and headers, the address of which is stored in that global variable called <code>request</code> that&#8217;s declared above <code>main</code>. Notice, too, that this function calls <code>error</code> in a couple of cases.</p>
</div>
</div>
<div class="sect3">
<h4 id="reset"><a class="link" href="#reset">reset</a></h4>
<div class="paragraph">
<p>And now that function called <code>reset</code>, which gets called within that infinite loop within <code>main</code>. Notice how this function not only frees memory, it also resets some of those global variables to known values.</p>
</div>
</div>
<div class="sect3">
<h4 id="start"><a class="link" href="#start">start</a></h4>
<div class="paragraph">
<p>Here&#8217;s that function that started it all (pun intended). Don&#8217;t worry if (even with <code>man</code>) you don&#8217;t understand all of its lines, particularly the networking code. But do keep in mind that <code>start</code> is the function that configures the server to listen for connections on a particular TCP port!</p>
</div>
</div>
<div class="sect3">
<h4 id="stop"><a class="link" href="#stop">stop</a></h4>
<div class="paragraph">
<p>And <code>stop</code> does the opposite, freeing all memory and ultimately compelling the server to exit, without even returning control to <code>main</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what_to_do"><a class="link" href="#what_to_do">What To Do</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Alright, let&#8217;s tackle those <code>TODO</code>s.</p>
</div>
<div class="sect2">
<h3 id="lookup_2"><a class="link" href="#lookup_2">lookup</a></h3>
<div class="paragraph">
<p>Complete the implementation of <code>lookup</code> in such a way that it returns</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>text/css</code> if <code>extension</code> is <code>css</code> (or any capitalization thereof),</p>
</li>
<li>
<p><code>text/html</code> if <code>extension</code> is <code>html</code> (or any capitalization thereof),</p>
</li>
<li>
<p><code>image/gif</code> if <code>extension</code> is <code>gif</code> (or any capitalization thereof),</p>
</li>
<li>
<p><code>image/x-icon</code> if <code>extension</code> is <code>ico</code> (or any capitalization thereof),</p>
</li>
<li>
<p><code>image/jpeg</code> (not <code>image/jpg</code>) if <code>extension</code> is <code>jpg</code> (or any capitalization thereof),</p>
</li>
<li>
<p><code>text/javascript</code> if <code>extension</code> is <code>js</code> (or any capitalization thereof),</p>
</li>
<li>
<p><code>image/png</code> if <code>extension</code> is <code>png</code> (or any capitalization thereof), or</p>
</li>
<li>
<p><code>NULL</code> otherwise.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="main_2"><a class="link" href="#main_2">main</a></h3>
<div class="sect3">
<h4 id="validate_request_line"><a class="link" href="#validate_request_line">validate request-line</a></h4>
<div class="paragraph">
<p>Per 3.1.1 of <a href="http://tools.ietf.org/html/rfc7230">http://tools.ietf.org/html/rfc7230</a>, a <code>request-line</code> is defined as</p>
</div>
<div class="literalblock">
<div class="content">
<pre>method SP request-target SP HTTP-version CRLF</pre>
</div>
</div>
<div class="paragraph">
<p>wherein <code>SP</code> represents a single space (<code> </code>) and <code>CRLF</code> represents <code>\r\n</code>. None of <code>method</code>, <code>request-target</code>, and <code>HTTP-version</code>, meanwhile, may contain <code>SP</code>.</p>
</div>
<div class="paragraph">
<p>Per 5.3 of the same RFC, <code>request-target</code>, meanwhile, can take several forms, the only one of which your server needs to support is</p>
</div>
<div class="literalblock">
<div class="content">
<pre>absolute-path [ "?" query ]</pre>
</div>
</div>
<div class="paragraph">
<p>whereby <code>absolute-path</code> (which will not contain <code>?</code>) must start with <code>/</code> and might optionally be followed by a <code>?</code> followed by a <code>query</code>, which may not contain <code>"</code>.</p>
</div>
<div class="paragraph">
<p>Ensure that <code>request-line</code> (which is already stored for you in a variable called <code>line</code>) is consistent with these rules. If it is not, respond to the browser with <strong>400 Bad Request</strong>.</p>
</div>
<div class="paragraph">
<p>Even if <code>request-line</code> is consistent with these rules,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if <code>method</code> is not <code>GET</code>, respond to the browser with <strong>405 Method Not Allowed</strong>;</p>
</li>
<li>
<p>if <code>request-target</code> does not begin with <code>/</code>, respond to the browser with <strong>501 Not Implemented</strong>;</p>
</li>
<li>
<p>if <code>request-target</code> contains a <code>"</code>, respond to the browser with <strong>400 Bad Request</strong>;</p>
</li>
<li>
<p>if <code>HTTP-version</code> is not <code>HTTP/1.1</code>, respond to the browser with <strong>505 HTTP Version Not Supported</strong>; or</p>
</li>
<li>
<p>if <code>absolute-path</code> does not contain a <code>.</code> (and thus a file extension), respond to the browser with <strong>501 Not Implemented</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Odds are you&#8217;ll find functions like <code>strchr</code>, <code>strcpy</code>, <code>strncpy</code>, and/or <code>strstr</code> of help!</p>
</div>
</div>
<div class="sect3">
<h4 id="extract_query_from_request_target"><a class="link" href="#extract_query_from_request_target">extract query from request-target</a></h4>
<div class="paragraph">
<p>Re-define a string called <code>query</code> that contains the <code>query</code> substring from <code>request-target</code>. If the latter is absent (even if a <code>?</code> is present), then the string should be <code>""</code>, thereby consuming one byte, whereby <code>query[0]</code> is <code>'\0'</code>.</p>
</div>
<div class="paragraph">
<p>For instance, if <code>request-target</code> is <code>/hello.php</code> or <code>/hello.php?</code>, then <code>query</code> should have a value of <code>""</code>. And if <code>request-target</code> is <code>/hello.php?q=Alice</code>, then <code>query</code> should have a value of <code>q=Alice</code>.</p>
</div>
<div class="paragraph">
<p>It&#8217;s probably best to ensure that <code>query</code> references memory on the stack, not the heap, so that you don&#8217;t need to worry about freeing it in <code>stop</code> if the user hits control-c.</p>
</div>
<div class="paragraph">
<p>Odds are you&#8217;ll find functions like <code>strchr</code>, <code>strcpy</code>, <code>strncpy</code>, and/or <code>strstr</code> of help!</p>
</div>
</div>
<div class="sect3">
<h4 id="concatenate_root_and_absolute_path"><a class="link" href="#concatenate_root_and_absolute_path">concatenate root and absolute-path</a></h4>
<div class="paragraph">
<p>Re-define a string called <code>path</code> that contains the concatenation of <code>root</code> (a global variable) and <code>absolute-path</code>.</p>
</div>
<div class="paragraph">
<p>It&#8217;s probably best to ensure that <code>path</code> references memory on the stack, not the heap, so that you don&#8217;t need to worry about freeing it in <code>stop</code> if the user hits control-c.</p>
</div>
<div class="paragraph">
<p>Odds are you&#8217;ll find functions like <code>strcat</code>, <code>strcpy</code>, and/or <code>strncpy</code> of help!</p>
</div>
</div>
<div class="sect3">
<h4 id="ensure_path_exists"><a class="link" href="#ensure_path_exists">ensure path exists</a></h4>
<div class="paragraph">
<p>Ensure that <code>path</code> actually exists. Respond to the browser with <strong>404 Not Found</strong> if not!</p>
</div>
<div class="paragraph">
<p>Odds are you&#8217;ll find functions like <code>access</code> and/or <code>stat</code> of help! For the latter, be sure to consult <code>man 2 stat</code> (i.e., chapter 2) rather than <code>man stat</code> (i.e., chapter 1).</p>
</div>
</div>
<div class="sect3">
<h4 id="ensure_path_is_readable"><a class="link" href="#ensure_path_is_readable">ensure path is readable</a></h4>
<div class="paragraph">
<p>Ensure that <code>path</code> is readable. Respond to the browser with <strong>403 Forbidden</strong> if not!</p>
</div>
<div class="paragraph">
<p>Odds are you&#8217;ll find functions like <code>access</code> and/or <code>stat</code> of help!</p>
</div>
</div>
<div class="sect3">
<h4 id="extract_path_s_extension"><a class="link" href="#extract_path_s_extension">extract path&#8217;s extension</a></h4>
<div class="paragraph">
<p>Re-define a string called <code>extension</code> that contains the file extension of the file specified by <code>path</code> (i.e., the substring after the last <code>.</code> in path).</p>
</div>
<div class="paragraph">
<p>It&#8217;s probably best to ensure that <code>extension</code> references memory on the stack, not the heap, so that you don&#8217;t need to worry about freeing it in <code>stop</code> if the user hits control-c.</p>
</div>
<div class="paragraph">
<p>Odds are you&#8217;ll find functions like <code>strchr</code>, <code>strrchr</code>, <code>strcpy</code>, <code>strncpy</code>, and/or <code>strstr</code> of help!</p>
</div>
</div>
<div class="sect3">
<h4 id="respond_to_client"><a class="link" href="#respond_to_client">respond to client</a></h4>
<div class="paragraph">
<p>Complete the implementation of support for static content in such a way that, after loading a file into memory via <code>load</code>, <code>main</code> responds to a browser with these lines</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">HTTP/1.1 200 OK
Connection: close
Content-Length: %i
Content-Type: %s</code></pre>
</div>
</div>
<div class="paragraph">
<p>each of which is terminated with CRLF (i.e., <code>\r\n</code>), which are followed after a single blank line (i.e., an additional CRLF) by the bytes of the file itself, whereby <code>%i</code> represents the file&#8217;s size in bytes and <code>%s</code> represents the file&#8217;s MIME type.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how_to_submit"><a class="link" href="#how_to_submit">How to Submit</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="step_1_of_2"><a class="link" href="#step_1_of_2">Step 1 of 2</a></h3>
<div class="paragraph">
<p>When ready to submit, open up a Terminal window and navigate your way to <code>~/Dropbox</code>.  Create a ZIP (i.e., compressed) file containing your entire <code>pset6</code> directory by executing the below.  Incidentally, <code>-r</code> means "recursive," which in this case means to ZIP up everything inside of <code>pset6</code>, including any subdirectories (or even subsubdirectories!).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>zip -r pset6.zip pset6</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you type <code>ls</code> thereafter, you should see that you have a new file called <code>pset6.zip</code> in <code>~/Dropbox</code>.  (If you realize later that you need to make a change to some file and re-ZIP everything, you can delete the ZIP file you already made with <code>rm pset6.zip</code>, then create a new ZIP file as before.)
* Once done creating your ZIP file, open up Chrome <em>inside</em> of the appliance (not on your own computer) and visit <a href="http://cs50.edx.org/submit">cs50.edx.org/submit</a>, logging in if prompted.
* Click <strong>Submit</strong> toward the window&#8217;s top-left corner.
* Under <strong>Problem Set 6</strong> on the screen that appears, click <strong>Upload New Submission</strong>.
* On the screen that appears, click <strong>Add files&#8230;</strong>.  A window entitled <strong>Open Files</strong> should appear.
* Navigate your way to <code>pset6.zip</code>, as by clicking <strong>jharvard</strong>, then double-clicking <strong>Dropbox</strong>.  Once you find <code>pset6.zip</code>, click it once to select it, then click <strong>Open</strong>.
* Click <strong>Start upload</strong> to upload your ZIP file to CS50&#8217;s servers.
* On the screen that appears, you should see a window with <strong>No File Selected</strong>.  If you move your mouse toward the window&#8217;s lefthand side, you should see a list of the files you uploaded.  Click each to confirm the contents of each.  (No need to click any other buttons or icons.)  If confident that you submitted the files you intended, consider your source code submitted!  If you&#8217;d like to re-submit different (or modified) files, simply return to <a href="http://cs50.edx.org/submit">cs50.edx.org/submit</a> and repeat these steps.  You may re-submit as many times as you&#8217;d like; we&#8217;ll grade your most recent submission, so long as it&#8217;s before the deadline.</p>
</div>
</div>
<div class="sect2">
<h3 id="step_2_of_2"><a class="link" href="#step_2_of_2">Step 2 of 2</a></h3>
<div class="paragraph">
<p>Head to <a href="http://cs50.edx.org/2015/psets/6/">http://cs50.edx.org/2015/psets/6/</a> where a short form awaits.  Once you have submitted that form (as well as your source code), you are done!</p>
</div>
<div class="paragraph">
<p>This was Problem Set 6.</p>
</div>
</div>
</div>
</div>
        </div>
        
        

        <div id="footer">
            Copyright &#169; David J. Malan
        </div>

        <script>

            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-8162502-43']);
            _gaq.push(['_trackPageview']);

            (function() {
              var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
              ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
              var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();

        </script>

    </body>
</html>